{% extends "base.html" %}

{% block header_data_text %}BLOCKCHAIN MONITOR v 0.1{% endblock %}

{% block title %}BLOCKS - BTC-OS Dashboard {% endblock %}

{% block css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/blocks.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/theme-toggle.css') }}">
{% endblock %}

{% block header %}BLOCKCHAIN MONITOR{% endblock %}

{% block blocks_active %}active{% endblock %}

{% block content %}

<!-- Miner diversity chart -->
<div class="row mb-2">
    <div class="col-12">
        <div class="card">
            <div class="card-header">MINER DISTRIBUTION (LAST 25 BLOCKS)</div>
            <div class="card-body text-center">
                <canvas id="minerChart" height="240"></canvas>
            </div>
        </div>
    </div>
</div>

<!-- Latest block stats -->
<div class="row mb-2 equal-height">
    <div class="col-12">
        <div class="card">
            <div class="card-header">LATEST BLOCK STATS</div>
            <div class="card-body">
                <div class="latest-block-stats">
                    <div class="stat-item">
                        <strong><i class="fa-solid fa-layer-group"></i> BLOCK HEIGHT:</strong>
                        <span id="latest-height" class="metric-value white">Loading...</span>
                    </div>
                    <div class="stat-item">
                        <strong><i class="fa-regular fa-clock"></i> TIME:</strong>
                        <span id="latest-time" class="metric-value blue">Loading...</span>
                    </div>
                    <div class="stat-item">
                        <strong><i class="fa-solid fa-receipt"></i> TRANSACTIONS:</strong>
                        <span id="latest-tx-count" class="metric-value white">Loading...</span>
                    </div>
                    <div class="stat-item">
                        <strong><i class="fa-solid fa-database"></i> SIZE:</strong>
                        <span id="latest-size" class="metric-value white">Loading...</span>
                    </div>
                    <div class="stat-item">
                        <strong><i class="fa-solid fa-gauge-high"></i> DIFFICULTY:</strong>
                        <span id="latest-difficulty" class="metric-value yellow">Loading...</span>
                    </div>
                    <div class="stat-item">
                        <strong><i class="fa-solid fa-people-group"></i> POOL:</strong>
                        <span id="latest-pool" class="metric-value green">Loading...</span>
                    </div>
                    <div class="stat-item">
                        <strong><i class="fa-solid fa-coins"></i> AVG FEE RATE:</strong>
                        <span id="latest-fee-rate" class="metric-value yellow" style="animation: pulse 1s infinite;">Loading...</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Blocks grid -->
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">RECENT BLOCKS</div>
            <div class="card-body">
                <div class="blocks-container">
                    <div id="blocks-grid" class="blocks-grid">
                        <!-- Blocks will be generated here via JavaScript -->
                        <div class="loader">
                            <span class="loader-text">Connecting to mempool.guide API<span class="terminal-cursor"></span></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Block details modal -->
<div id="block-modal" class="block-modal">
    <div class="block-modal-content">
        <div class="block-modal-header">
            <span class="block-modal-title">BLOCK DETAILS</span>
            <span class="block-modal-close">&times;</span>
        </div>
        <div class="block-modal-body">
            <div id="block-details">
                <!-- Block details will be displayed here -->
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block javascript %}
<script src="{{ url_for('static', filename='js/blocks.js') }}"></script>
{% endblock %}
